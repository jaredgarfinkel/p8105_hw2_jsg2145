p8105\_hw2\_jsg2145
================
Jared Garfinkel
9/27/2019

## Homework 2

### Problem 1

``` r
mr_trash = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", 
                              sheet = "Mr. Trash Wheel", 
                              range = readxl::cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster)) %>% 
  mutate(
    sports_balls = 
      round(sports_balls, digits = 0) %>% 
      as.integer())
```

``` r
precip_18 = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                              sheet = "2018 Precipitation", range = readxl::cell_rows(2:14)) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(total)) %>% 
  mutate(year = 2018)

precip_17 = readxl::read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx",
                               sheet = "2017 Precipitation", range = readxl::cell_rows(2:14)) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(total)) %>% 
  mutate(year = 2017)
```

``` r
precip1718 = full_join(precip_17, precip_18) %>% 
  mutate(
    month = month.name[month])
```

    ## Joining, by = c("month", "total", "year")

## Problem 1 summary

#### The Mr. Trash Wheel data is the data collected from a skimmer that collects debris in a bay in Maryland.The volume and weight of the debris collected appear to be rising over the period of the data, from 2014 to 2018. Interestingly, this trend does not appear in each category of waste. Most of the variables peaked in 2016 or simply tapered off after the first year. One variable that shows this increasing trend over time is “Homes Powered”, which is a measurement of the power generated by a waste-to-energy plant. However, the number of dumpsters also increased over time. One explanation for this is that the tare weight was off, creating a situation where each time a dumpster was weighed, it overestimated the total weight collected. Another one is that the amount of stuff being collected was underestimated. I’m not really sure what’s going on here. It might have something to do with the way the volume is measured. There is a cluster of volume measurements at 15 cubic yards and about 18 cubic yards. The density of the weights appears to stay the same over time.

``` r
mr_trash %>% 
  ggplot(aes(x = volume_cubic_yards)) +
  geom_histogram()
```

    ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-3-1.png)<!-- -->

``` r
mr_trash %>% 
  ggplot(aes(x = year, y = weight_tons / volume_cubic_yards, group = year)) +
  geom_boxplot()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->

``` r
mr_trash %>% 
  ggplot(aes(x = year, y = weight_tons)) +
  geom_col()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-5-1.png)<!-- -->

``` r
mr_trash %>% 
  ggplot(aes(x = year, y = volume_cubic_yards)) +
  geom_col()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-6-1.png)<!-- -->

#### The precipitation data appears to show that there is less precipitation in June than in May. The total precipitation in 2018 from January to July was 23.5. The total precipitation in 2017 during the same period was 25.49.

``` r
precip1718 %>% 
  filter(year == 2017) %>% 
  mutate(month = factor(month, levels = month.name)) %>% 
  ggplot(aes(x = month, y = total)) +
  geom_col()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->

``` r
precip1718 %>% 
  filter(year == 2018) %>% 
  mutate(month = factor(month, levels = month.name)) %>% 
  ggplot(aes(x = month, y = total)) +
  geom_col()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-7-2.png)<!-- -->

## Problem 2

``` r
polls = read_csv(file = "./data/pols-month.csv") %>% 
  separate(mon, c("year", "month", "day"), "-") %>% 
  mutate(
    month = as.numeric(month),
    month = month.name[month],
    month = factor(month, levels = month.name),
    year = as.numeric(year),
    president = ifelse(prez_gop == 1, "gop", "dem")) %>% 
  arrange(year, month) %>% 
  select(year, month, gov_gop, sen_gop, rep_gop, gov_dem, sen_dem, rep_dem, president)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

``` r
snp = read_csv(file = "./data/snp.csv") %>% 
  separate(date, c("month", "day", "year"), "/") %>% 
  mutate(
    month = as.numeric(month),
    month = month.name[month],
    month = factor(month, levels = month.name),
    year = as.numeric(year)) %>% 
  arrange(year, month) %>% 
  select(year, month, close)
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
unmp = read_csv(file = "./data/unemployment.csv") %>% 
  pivot_longer(c(2:13), names_to = "month") %>% 
  janitor::clean_names() %>% 
  mutate(
    month = match(month, month.abb), 
    month = month.name[month])
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
join1 = full_join(polls, snp, by = c("year", "month")) %>% 
  rename(snp_close = close)
join2 = full_join(join1, unmp, by = c("year", "month")) %>% 
  rename(unmp_rate = value)
```

    ## Warning: Column `month` joining factor and character vector, coercing into
    ## character vector

``` r
join2 %>% 
  filter(!is.na(unmp_rate)) %>% 
  mutate(
    president = factor(president, levels = c("gop", "dem"))) %>% 
  ggplot(aes(x = year, y = unmp_rate, fill = president, group = year)) +
  geom_boxplot()
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-12-1.png)<!-- -->

``` r
join2 %>% 
  filter(!is.na(snp_close)) %>% 
  ggplot(aes(x = year, y = snp_close)) +
  geom_smooth(se = FALSE)
```

    ## `geom_smooth()` using method = 'loess' and formula 'y ~ x'

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-13-1.png)<!-- -->

#### The pols-months dataset gives a detailed count of the republican and democratic senators, representatives, and governors. There were 822 months of data, with 9 variables. The snp dataset is the closing price of the S\&P 500 for each month from 1950 to 2015. The S\&P 500 rose since the beginning of the data collection. The unemployment dataset gives the unemployment rate for each month from 1948 to 2015. The three datasets together cover the period from 1948 to 2015. The dataframe is 828 rows by 11 columns. A visual above shows the changes to the unemployment rate in years during which the president was from the Democratic Party or the GOP. The average unemployment rate over the period of data collection is 5.83.

## Problem 3

``` r
bbnm = read_csv(file = "./data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  distinct() %>% 
  rename(year = year_of_birth,
         fname = childs_first_name) %>% 
  mutate(fname = toupper(fname),
         ethnicity = 
           recode(ethnicity, 
                  "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER",
                  "BLACK NON HISP" = "BLACK NON HISPANIC",
                  "WHITE NON HISP" = "WHITE NON HISPANIC")) 
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
bbnm %>% 
  group_by(year, gender) %>% 
  mutate(
    rank = min_rank(desc(count))) %>% 
  ungroup() %>% 
  group_by(year, count) %>% 
  rename(Year = year,
         Ethnicity = ethnicity,
         Count = count,
         Rank = rank) %>% 
  filter(fname == "OLIVIA") %>% 
  select(Year, Ethnicity, Count, Rank) %>% 
  knitr::kable(caption = "Popularity of the Name Olivia")
```

| Year | Ethnicity                  | Count | Rank |
| ---: | :------------------------- | ----: | ---: |
| 2016 | ASIAN AND PACIFIC ISLANDER |   172 |   15 |
| 2016 | BLACK NON HISPANIC         |    49 |  125 |
| 2016 | HISPANIC                   |   108 |   37 |
| 2016 | WHITE NON HISPANIC         |   230 |    3 |
| 2015 | ASIAN AND PACIFIC ISLANDER |   188 |   10 |
| 2015 | BLACK NON HISPANIC         |    82 |   62 |
| 2015 | HISPANIC                   |    94 |   46 |
| 2015 | WHITE NON HISPANIC         |   225 |    4 |
| 2014 | ASIAN AND PACIFIC ISLANDER |   141 |   21 |
| 2014 | BLACK NON HISPANIC         |    52 |  115 |
| 2014 | HISPANIC                   |    96 |   42 |
| 2014 | WHITE NON HISPANIC         |   248 |    4 |
| 2013 | ASIAN AND PACIFIC ISLANDER |   109 |   36 |
| 2013 | BLACK NON HISPANIC         |    64 |   81 |
| 2013 | HISPANIC                   |    87 |   55 |
| 2013 | WHITE NON HISPANIC         |   233 |    4 |
| 2012 | ASIAN AND PACIFIC ISLANDER |   132 |   27 |
| 2012 | BLACK NON HISPANIC         |    58 |   95 |
| 2012 | HISPANIC                   |    77 |   63 |
| 2012 | WHITE NON HISPANIC         |   198 |    7 |
| 2011 | ASIAN AND PACIFIC ISLANDER |    89 |   51 |
| 2011 | BLACK NON HISPANIC         |    52 |  112 |
| 2011 | HISPANIC                   |    86 |   53 |
| 2011 | WHITE NON HISPANIC         |   213 |    5 |

Popularity of the Name Olivia

``` r
bbnm %>% 
  group_by(year, ethnicity) %>% 
  filter(gender == "MALE", rank == 1) %>% 
  rename(Year = year,
         Ethnicity = ethnicity,
         Count = count,
         "First Name" = fname) %>% 
  select(Year, Ethnicity, "First Name", Count) %>% 
  ungroup() %>% 
  arrange(Year, Ethnicity) %>% 
  knitr::kable(caption = "Most Popular Names for Boys")
```

| Year | Ethnicity                  | First Name | Count |
| ---: | :------------------------- | :--------- | ----: |
| 2011 | ASIAN AND PACIFIC ISLANDER | ETHAN      |   177 |
| 2011 | BLACK NON HISPANIC         | JAYDEN     |   184 |
| 2011 | HISPANIC                   | JAYDEN     |   426 |
| 2011 | WHITE NON HISPANIC         | MICHAEL    |   292 |
| 2012 | ASIAN AND PACIFIC ISLANDER | RYAN       |   197 |
| 2012 | BLACK NON HISPANIC         | JAYDEN     |   171 |
| 2012 | HISPANIC                   | JAYDEN     |   364 |
| 2012 | WHITE NON HISPANIC         | JOSEPH     |   300 |
| 2013 | ASIAN AND PACIFIC ISLANDER | JAYDEN     |   220 |
| 2013 | BLACK NON HISPANIC         | ETHAN      |   146 |
| 2013 | HISPANIC                   | JAYDEN     |   352 |
| 2013 | WHITE NON HISPANIC         | DAVID      |   304 |
| 2014 | ASIAN AND PACIFIC ISLANDER | JAYDEN     |   187 |
| 2014 | BLACK NON HISPANIC         | ETHAN      |   138 |
| 2014 | HISPANIC                   | LIAM       |   312 |
| 2014 | WHITE NON HISPANIC         | JOSEPH     |   300 |
| 2015 | ASIAN AND PACIFIC ISLANDER | JAYDEN     |   190 |
| 2015 | BLACK NON HISPANIC         | NOAH       |   163 |
| 2015 | HISPANIC                   | LIAM       |   356 |
| 2015 | WHITE NON HISPANIC         | DAVID      |   299 |
| 2016 | ASIAN AND PACIFIC ISLANDER | ETHAN      |   193 |
| 2016 | BLACK NON HISPANIC         | NOAH       |   148 |
| 2016 | HISPANIC                   | LIAM       |   387 |
| 2016 | WHITE NON HISPANIC         | JOSEPH     |   261 |

Most Popular Names for Boys

``` r
bbnm %>% 
  filter(gender == "MALE", ethnicity == "WHITE NON HISPANIC", year == "2016") %>% 
  mutate(Rank = rank) %>% 
  ggplot(aes(x = Rank, y = count)) +
  geom_point() +
  labs(y = "Number of Boys Given a Name")
```

![](p8105_hw2_jsg2145_files/figure-gfm/unnamed-chunk-17-1.png)<!-- -->
